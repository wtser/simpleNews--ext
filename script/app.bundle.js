!function(e){function t(i){if(r[i])return r[i].exports;var a=r[i]={exports:{},id:i,loaded:!1};return e[i].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var r={};return t.m=e,t.c=r,t.p="/script/",t(0)}([function(e,t,r){e.exports=r(1)},function(e,t,r){"use strict";var i=function(){this.sites=r(2),this.feed={},this.loading=!1,this.fetchUrl=null,this.init()};i.prototype.renderSiteList=function(){var e=this.sites.reduce(function(e,t,r){return e+("<li data-index='"+r+'\' class="reader__site-item reader__site-item--content"><span class="reader__site-title">'+t.name+"</span></li>")},"");document.querySelector(".reader__site-items").innerHTML=e},i.prototype.redirect=function(e){chrome.tabs.create({url:e,active:!1})},i.prototype.renderFeed=function(e){document.querySelector(".reader__loading").classList.remove("hide"),this.parseArticle(e),this.fetchUrl=e.url},i.prototype.fetch=function(e,t){return new Promise(function(r,i){var a=new XMLHttpRequest,n=(t&&t.method?t.method:"get").toUpperCase();a.open(n,e,!0),t&&t.header&&Object.keys(t.header).forEach(function(e){a.setRequestHeader(e,t.header[e])}),a.onload=function(){4===a.readyState&&200===a.status?r(a.response):i(a)},a.onreadystatechange=function(){},a.send(t?t.body:null)})},i.prototype.parseArticle=function(e){var t=this;e.domain=e.url.split("/"),e.domain=e.domain[0]+"//"+e.domain[2],e.fetchUrl=e.fetchUrl?e.fetchUrl:e.api?e.api:e.url,"end"!==e.fetchUrl&&t.fetch(e.fetchUrl).then(function(r){if(t.fetchUrl==e.url){switch(e.type){case"ajax":r=JSON.parse(r)}if(r){var i=void 0,a=void 0,n=void 0;switch(e.type){case"html":var o=document.createElement("div");o.innerHTML=r,i=o.querySelectorAll(e.selector.item||e.selector);var l=function(e,t){var r=e.querySelector(t);return r&&(r=r.textContent.trim())?r:""},s=function(t,r){var i=t.querySelector(r);if(i&&(i=i.getAttribute("href"))){if(i.indexOf("http")===-1)if("/"!=i[0]){var a=e.url.split("/");a.pop(),a.push(i),i=a.join("/")}else i="/"!=i[1]?e.domain+i:"http:"+i;return i}return""};n=s(o,e.selector.next),a=Array.prototype.map.call(i,function(t){var r=l(t,e.selector.title),i=s(t,e.selector.href),a=l(t,e.selector.desc);return{title:r,href:i,desc:a}});break;case"ajax":var c=r;n=c[e.selector.next];var h=parseInt(e.fetchUrl.match(/page=[\d]+/)[0].split("=")[1])+1;n=e.api,n=n.replace(/page=[\d]+/,"page="+h),a=c[e.selector.item].map(function(t){var r;return t[e.selector.href].indexOf("http")===-1&&(r=e.domain,"/"!==t[e.selector.href][0]&&(r+="/"),"/"===t[e.selector.href][1]&&(r="http:"),t[e.selector.href]=r+t[e.selector.href]),{title:t[e.selector.title].trim(),href:t[e.selector.href],desc:t[e.selector.desc]}})}var d="html";e.domain===t.feed.domain&&"end"!=e.fetchUrl&&e.fetchUrl!=(e.api?e.api:e.url)&&(d="append"),t.renderArticles(a,d),e.fetchUrl=n?n:"end",t.feed=e}}},function(e){console.log(e)})},i.prototype.renderArticles=function(e,t){var r=e.reduce(function(e,t){return e+('<li class="reader__list-item"><a target="_blank" href="'+t.href+'" class="reader__list-item-link"><span class="reader__list-item-title">'+t.title+'</span><span class="reader__list-item-below ellipsis">'+(t.desc?t.desc:t.href)+"</span></a></li>")},""),i=document.createElement("div");i.innerHTML=r,"html"===t?document.querySelector(".reader__list").innerHTML=r:document.querySelector(".reader__list").append(i),document.querySelector(".reader__loading").classList.add("hide"),this.loading=!1},i.prototype.eventBind=function(){var e=this,t=document.querySelectorAll(".reader__site-item--content"),r=!0,i=!1,a=void 0;try{for(var n,o=function(){var t=n.value,r=t[0],i=t[1];i.addEventListener("click",function(t){var i=document.querySelector(".reader__site-item--active");i?i.classList.remove("reader__site-item--active"):"";for(var a=t.target;!a.classList.contains("reader__site-item");)a=a.parentElement;a.classList.add("reader__site-item--active");var n=e.sites[r];delete n.fetchUrl,document.querySelector(".reader__list").innerHTML="",e.loading=!0,e.renderFeed(n)})},l=t.entries()[Symbol.iterator]();!(r=(n=l.next()).done);r=!0)o()}catch(e){i=!0,a=e}finally{try{!r&&l.return&&l.return()}finally{if(i)throw a}}document.querySelector(".reader__news").addEventListener("scroll",function(t){if(e.feed.selector.next){var r=t.target,i=r.clientHeight/(r.scrollHeight-r.scrollTop);i>.7&&0==e.loading&&(e.loading=!0,e.renderFeed(e.feed))}});var s=document.querySelector(".reader__list");s.addEventListener("click",function(t){t.preventDefault();for(var r=t.target;!r.classList.contains("reader__list-item-link");)if(r=r.parentNode,"BODY"==t.nodeName)return;var i=r.href;e.redirect(i)})},i.prototype.init=function(){this.renderSiteList(),this.eventBind()},new i},function(e,t){"use strict";e.exports=[{url:"http://zzhzbbs.zjol.com.cn/forum-2-1.html",selector:{item:"#threadlisttableid>tbody",title:".xst",href:".xst",next:".nxt"},name:"口水楼市",type:"html"},{url:"http://www.19lou.com/forum-111-1.html",selector:{item:".list-data-item",title:".subject>a",href:".subject>a",next:".page-next"},name:"19lou 购房俱乐部",type:"html"},{icon:"http://www.solidot.org/favicon.ico",url:"http://www.solidot.org/",selector:{item:".block_m",title:"h2>a",href:"h2>a"},name:"solidot",type:"html",desc:"奇客的资讯，重要的东西"},{url:"https://stackshare.io/trending/tools",selector:{item:".trending-load-more>div",title:"#service-name-trending",href:".btn",desc:".trending-description"},name:"stackshare",type:"html"},{name:"slashdot",url:"https://slashdot.org/popular",type:"html",selector:{item:".fhitem",title:".story-title>a",href:".story-title>a"}},{name:"medium",url:"https://medium.com/topic/popular",type:"html",selector:{item:"h2+div>section",title:"h3 a",href:"h3 a",desc:"h3+div"}},{name:"lifehacker",url:"http://lifehacker.com/",type:"html",selector:{item:".post-wrapper",title:".entry-title>a",href:".entry-title>a",desc:".entry-summary"}},{name:"github trending",url:"https://github.com/trending",type:"html",selector:{item:".repo-list>li",title:"h3 a ",href:"h3 a",desc:".py-1 .d-inline-block"}},{icon:"https://news.ycombinator.com/favicon.ico",name:"hacker news",url:"https://news.ycombinator.com/",selector:{item:".athing",title:".title>a",href:".title>a",next:".morelink"},type:"html",desc:"HN"},{name:"saraba1st",url:"http://bbs.saraba1st.com/2b/forum-75-1.html",selector:{item:"#threadlisttableid tbody",title:".s.xst",href:".s.xst",next:".nxt"},type:"html"},{icon:"https://toutiao.io/apple-icon-180x180.png",url:"https://toutiao.io",name:"开发者头条",type:"html",selector:{item:".post",title:".title>a",href:".title>a"},desc:"技术极客的头条新闻"},{icon:"https://www.v2ex.com/static/img/icon_rayps_64.png",name:"v2ex",url:"https://www.v2ex.com/?tab=hot",selector:{item:".item tr",title:".item_title a",href:".item_title a",desc:".small.fade"},type:"html",desc:"创意工作者们的社区"},{icon:"https://static.zhihu.com/static/revved/img/ios/touch-icon-152.87c020b9.png",url:"http://www.zhihu.com/explore/recommendations",name:"知乎编辑推荐",selector:{item:".zm-item",title:"h2>a",href:"h2>a",desc:".zh-summary"},type:"html",desc:"与世界分享你的知识、经验和见解"},{name:"抽屉新热榜",url:"http://dig.chouti.com/all/hot/recent/1",selector:{item:".content-list>.item",title:".part1>a.show-content",href:".part1>a.show-content",desc:".summary",next:"#dig_lcpage li:last-child a"},type:"html",desc:"聚合每日热门、搞笑、有趣资讯"},{icon:"http://www.redditstatic.com/favicon.ico",name:"reddit",url:"http://www.reddit.com/r/all/",selector:{item:".linklisting .thing",title:".entry .may-blank",href:".entry .may-blank",next:".nextprev a"},type:"html",desc:"the front page of the internet"},{icon:"http://s.jandan.com/static/img/appicon.png",name:"煎蛋",url:"http://jandan.net/",selector:{item:".post:not(#adsense)",title:"h2>a",href:"h2>a",next:".wp-pagenavi a:last-child"},type:"html",desc:"地球上没有新鲜事"},{icon:"http://rs-assets.b0.upaiyun.com/assets/apple-touch-icon-180x180-precomposed-763d5ea2ad5193d98490fa9b7c362cfc.png",name:"NEXT",url:"http://next.36kr.com/posts",selector:{item:".product-item ",title:".post-url",href:".post-url",desc:".post-tagline"},type:"html",desc:"不错过任何一个新产品"},{icon:"http://wanqu.co/static/images/wanqu/favicons/apple-touch-icon-180x180.png",url:"http://wanqu.co/hot/",name:"湾区日报",type:"html",desc:"关注互联网、创业、技术",selector:{item:".list-group>.list-group-item .list-title",title:"a",href:"a"}},{icon:"http://sfault-avatar.b0.upaiyun.com/235/056/2350560982-56796cae3be72_huge256",url:"http://faxian.smzdm.com/h2s0t0f0c1p1/",name:"什么值得买热门2小时",selector:{item:".feed-list-col li",title:".feed-ver-title>a",href:".feed-ver-title>a",next:".pagenation-list li:last-child a"},type:"html",desc:"汇集2小时里最热门的网友优惠商品爆料"},{url:"http://yangmaojie.com/",name:"羊毛头条",selector:{item:".media",title:".subject a",href:".subject a",next:".page-item:last-child a"},type:"html",desc:"交流活动信息，没事薅个羊腿"},{icon:"http://www.kiees.com/favicon.ico",url:"http://www.kiees.com/",name:"发现值得买",selector:{item:".postbox",title:"h2 a",href:"h2 a",next:".wp-pagenavi>a:last-child"},type:"html",desc:"高性价比网购推荐"},{type:"ajax",api:"https://hstar-hi.alicdn.com/dream/ajax/getProjectList.htm?page=1&pageSize=30&projectType=&type=6&status=1&sort=1",icon:"https://img.alicdn.com/tps/TB19yVcJFXXXXaNXFXXXXXXXXXX-384-119.png",url:"https://hi.taobao.com/market/hi/list.php",selector:{item:"data",title:"name",href:"link",next:"page"},name:"淘宝众筹",desc:"认真对待每一个梦想"},{icon:"http://static.360buyimg.com/finance/base/1.2.0/images/logo-slogan.png",url:"http://z.jd.com/bigger/search.html?status=2&sort=zhtj&categoryId=&parentCategoryId=&sceneEnd=&productEnd=&keyword=&page=1&pageSize=30",name:"京东众筹",type:"html",selector:{item:".info.type_now",title:".i-tits",href:"a"},desc:"京东金融综合互联网理财服务"},{name:"草榴技术区",url:"http://t66y.com/thread0806.php?fid=7",selector:{item:"#ajaxtable .t_one",title:"h3>a",href:"h3>a",next:".pages>a:nth-last-child(2)"},type:"html",desc:"1024"}]}]);